<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Will Cars: Compra autopartes de calidad para Toyota, Ford y más.">
    <meta name="keywords" content="autopartes, repuestos, Will Cars, Toyota, Ford">
    <meta http-equiv="Content-Security-Policy" content="
    script-src 'self' https://code.jquery.com https://cdn.jsdelivr.net http://localhost:3000 https://cdnjs.cloudflare.com https://stackpath.bootstrapcdn.com https://socket.io;
    style-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://stackpath.bootstrapcdn.com https://fonts.googleapis.com 'unsafe-inline';
    font-src 'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com;
    img-src 'self' http://localhost:3000 data:;
    connect-src 'self' http://localhost:3000 ws://localhost:3000 wss://localhost:3000 https://your-domain.com wss://your-domain.com;
    form-action 'self';
">
    <title>Will Cars Buscador</title>

    <!-- Favicon -->
    <link rel="icon" href="img/favicon.ico">
    
    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-xeZ+utCPjE1x2HuV1+Rg9NZ4oTA/0B+8s+vQ10c3z8vYFaKPePA4E4y0O3rAyaZ1m4Z1Dl2oZRo9HYV6yB3Y8ow==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Libraries Stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<link rel="stylesheet" href="css/style.css">

<!--<link rel="stylesheet" href="/css/buscador.css"> -->
   <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.9/dist/purify.min.js"></script>
   
    <!-- CSS adicional -->
    <style>
/* Estilos generales */
body {
        font-family: 'Poppins', sans-serif;
        transition: background-color 0.3s ease, color 0.3s ease;
        margin-top: 70px;
    }

body.dark-mode {
    background-color: #1a1a1a;
    color: #e0e0e0;
}

/* Barra de navegación estilo Amazon */
.amazon-nav {
    background-color: #131921;
    padding: 10px 20px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

body.dark-mode .amazon-nav {
    background-color: #2d2d2d;
}

/* Logo */
.logo-img {
    transition: transform 0.3s ease;
}

.logo-img:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px #00ff59;
    border-radius: 8px;
}

.text-decoration-none span {
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    border-radius: 8px;
}

/* Buscador */
.search-container {
    display: flex;
    align-items: stretch; /* Cambiado de 'center' a 'stretch' para que todos los elementos tengan la misma altura */
    max-width: 600px;
    margin: 0 auto;
    border: 1px solid #ddd; /* Borde unificado para todo el contenedor */
    border-radius: 4px; /* Radio de borde para el contenedor */
    overflow: hidden; /* Evita que los elementos internos rompan el border-radius */
    background-color: #fff; /* Fondo blanco para unificar el diseño */
}

.search-category {
    position: relative;
    flex-shrink: 0; /* Evita que el botón de categorías se encoja */
}


.search-category-btn {
    background-color: #f3f3f3;
    border: none;
    padding: 8px 12px;
    font-size: 14px;
    color: #111;
    border-radius: 4px 0 0 4px; /* Esquina redondeada solo a la izquierda */
    height: 100%; /* Asegura que coincida con la altura del input */
    line-height: normal; /* Ajusta la alineación vertical del texto */
}

.search-category-btn:hover {
    background: #e6e6e6;
}

body.dark-mode .search-category-btn {
    background: #3a3a3a;
    color: #e0e0e0;
    border-color: #555;
}

body.dark-mode .search-category-btn:hover {
    background: #4a4a4a;
}

.search-category-menu {
    max-height: 200px;
    overflow-y: auto;
    margin-top: 0; /* Elimina espacio superior para que el menú esté pegado al botón */
}

body.dark-mode .search-category-menu {
    background: #2d2d2d;
}

.search-category-menu .dropdown-item {
    color: #111;
    padding: 8px 15px;
    font-size: 14px;
}

body.dark-mode .search-category-menu .dropdown-item {
    color: #e0e0e0;
}

.search-category-menu .dropdown-item:hover {
    background: #f1f5f9;
}

body.dark-mode .search-category-menu .dropdown-item:hover {
    background: #3d3d3d;
}

.search-input {
    flex: 1;
    padding: 8px;
    font-size: 14px;
    border: none; /* Elimina bordes internos para continuidad */
    border-radius: 0; /* Sin radios internos */
    outline: none; /* Evita el contorno azul por defecto */
}

.search-input:focus {
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.2);
    border-color: #007bff;
    outline: none;
}

.search-button {
    background-color: #febd69;
    border: none;
    padding: 8px 12px;
    border-radius: 0 4px 4px 0; /* Esquina redondeada solo a la derecha */
    height: 100%; /* Asegura que coincida con la altura del input */
    display: flex;
    align-items: center;
    justify-content: center;
}
        

/* .search-button:hover { 
    background-color: #f4a261;
    transform: translateX(3px);
    margin-left: 5px;
} */

.search-button i {
    color: #131921;
    font-size: 18px;
}

        /* Efecto de borde verde al hacer foco */
.search-container:focus-within {
    border-color: #f4a261; /* Verde como el logotipo (.text-primary) */
    box-shadow: 0 0 20px #f4a261; /* Sombra suave para resaltar */
}
        
body.dark-mode .search-input {
    background: #3a3a3a;
    color: #e0e0e0;
    border-color: #555;
}

body.dark-mode .search-button {
    background-color: #f4a261;
}

body.dark-mode .search-button i {
    color: #e0e0e0;
}

/* Enlaces de navegación */
.nav-links {
    display: flex;
    align-items: center;
    gap: 20px; /* Aumentado de 15px a 20px para más separación */
    flex-wrap: nowrap;
}

.nav-link {
    color: white;
    text-decoration: none;
    font-size: 14px;
    padding: 5px 10px;
    transition: color 0.3s ease;
    position: relative;
}

.nav-link:hover {
    color: #febd69;
}

.nav-link.login-btn, .nav-link.theme-btn {
    background: #37475a;
    border: none;
    padding: 5px 15px;
    border-radius: 5px;
}

.nav-link.login-btn:hover, .nav-link.theme-btn:hover {
    background: #485563;
}

body.dark-mode .nav-link {
    color: #e0e0e0;
}

body.dark-mode .nav-link.login-btn, body.dark-mode .nav-link.theme-btn {
    background: #4a5568;
}

body.dark-mode .nav-link.login-btn:hover, body.dark-mode .nav-link.theme-btn:hover {
    background: #5a677a;
}

/* Separador */
.nav-spacer {
    width: 1px;
    height: 30px;
    background-color: rgba(255, 255, 255, 0.3);
    margin: 0 3px; /* Aumentado para más separación visual */
}
        

/* Carrito y favoritos */
.cart-container, .favorite-container {
    position: relative;
    display: inline-flex;
    align-items: center; /* Alinear verticalmente el ícono y el contador */
}

.fas.fa-shopping-cart, .fas.fa-heart {
    font-size: 18px;
    left: 0px;
}

.cart-count, .badge {
    position: absolute;
    top: px; /* Ajustado de -10px a -5px para centrar verticalmente */
    right: -15px;
    font-size: 12px;
    line-height: 16px; /* Ajustar altura de línea para centrar el texto */
    padding: 2px 6px; /* Ajustar padding para mejor apariencia */
}
        
.cart-count {
    background-color: #febd69; /* Fondo similar al botón de búsqueda */
    color: #111;
    border-radius: 50%;
}
.badge {
    background-color: #febd69;
    color: #333;
    border: 1px solid #333;
    border-radius: 50%;
}
        
        
        
body.dark-mode .cart-count, body.dark-mode .badge {
    background-color: #f4a261;
    color: #212529;
}

/* Moneda e idioma */
.currency-lang {
    order: 999; /* Mantiene USD y ES al final */
}

.currency-lang .btn {
    padding: 5px 10px;
    font-size: 14px;
}

/* Responsividad box buscador */
@media (max-width: 768px) {
    .amazon-nav {
        padding: 10px;
    }
    .search-container {
        margin: 10px 0;
        max-width: 100%;
    }
    .search-category-btn {
        padding: 8px 10px;
        font-size: 12px;
        height: 40px;
    }
    .search-input {
        height: 40px;
        font-size: 14px;
    }
    .search-button {
        height: 40px;
        padding: 8px 10px;
    }
    .nav-links {
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
    }
    .nav-link {
        font-size: 12px;
    }
    .logo-img {
        height: 30px;
    }
    .nav-spacer {
        width: 10px;
    }
    .cart-container, .favorite-container {
        margin: 0 5px;
    }
    .currency-lang {
        margin: 0 5px;
    }
}

/* Botones de acción */
.btn-action {
    padding: 0;
    margin: 2px;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    font-size: 16px;
    width: 36px;
    height: 36px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
}

.btn-action:hover {
    transform: scale(1.15) rotate(10deg);
    box-shadow: 0 6px 12px rgba(0,0,0,0.2);
}

.btn-cart {
    background-color: #34c759;
    color: white;
}

.btn-cart:hover {
    background-color: #2ea44f;
}

.btn-details {
    background-color: #007bff;
    color: white;
}

.btn-details:hover {
    background-color: #2d3748;
}

/* Tabla de productos */
.tableizer-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 10px;
    margin-top: 30px;
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.tableizer-table th {
    background-color: #2d3748;
    color: white;
    padding: 15px;
    font-weight: 500;
}

.tableizer-table td {
    padding: 15px;
    border: none;
    background: #fff;
    transition: background-color 0.3s ease;
}

.tableizer-table tr:hover td {
    background-color: #f1f5f9;
}

body.dark-mode .tableizer-table {
    background: #2d2d2d;
}

body.dark-mode .tableizer-table td {
    background: #2d2d2d;
    color: #e0e0e0;
}

body.dark-mode .tableizer-table tr:hover td {
    background-color: #3d3d3d;
}

/* Carrito flotante */
#cartSidebar {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 850px;
    height: 600px;
    max-height: 80vh;
    background: #fff;
    box-shadow: 0 0 15px rgba(0, 123, 255, 0.86);
    z-index: 1000;
    padding: 20px;
    border-radius: 10px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
}

#cartSidebar.show {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

#cartSidebar:not(.show) {
    transform: translate(-50%, -50%) scale(0.95);
}

body.dark-mode #cartSidebar {
    background: #2d2d2d;
}

/* Mantener el resto de los estilos para modales, notificaciones, etc. */
.quantity-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
}

.quantity-btn {
    background: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    width: 30px;
    height: 30px;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.quantity-btn:hover {
    background: #0056b3;
}

.quantity-btn:disabled {
    background: #6c757d;
    cursor: not-allowed;
}

.quantity-value {
    width: 40px;
    text-align: center;
    border: 1px solid #e2e8f0;
    border-radius: 5px;
    padding: 2px;
}

body.dark-mode .quantity-btn {
    background: #4682b4;
}

body.dark-mode .quantity-btn:hover {
    background: #5a9bd4;
}

body.dark-mode .quantity-btn:disabled {
    background: #4a5568;
}

body.dark-mode .quantity-value {
    background: #2d2d2d;
    color: #e0e0e0;
    border-color: #4a5568;
}

.cart-scroll-container {
    flex: 1;
    max-height: none;
    overflow-y: auto;
    margin-bottom: 15px;
    padding: 0 5px;
}

.cart-scroll-container::-webkit-scrollbar {
    width: 8px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.cart-scroll-container::-webkit-scrollbar-track {
    background: transparent;
}

.cart-scroll-container::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}

.cart-scroll-container:hover::-webkit-scrollbar {
    opacity: 1;
}

.cart-scroll-container:hover::-webkit-scrollbar-thumb {
    background: #555;
}

body.dark-mode .cart-scroll-container::-webkit-scrollbar-thumb {
    background: #bbb;
}

body.dark-mode .cart-scroll-container:hover::-webkit-scrollbar-thumb {
    background: #fff;
}

.cart-scroll-container table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.cart-scroll-container th,
.cart-scroll-container td {
    padding: 10px;
    text-align: center;
}

.cart-scroll-container th {
    background-color: #2d3748;
    color: white;
    font-size: 13px;
}

.cart-scroll-container td {
    font-size: 13px;
}

.cart-scroll-container tr:hover td {
    background-color: #e6f3ff;
    transition: background-color 0.3s ease;
}

body.dark-mode .cart-scroll-container tr:hover td {
    background-color: #4a5e7d;
}

.cart-footer {
    padding: 10px 0;
    border-top: 1px solid #e2e8f0;
    text-align: center;
    background: #fff;
    flex-shrink: 0;
}

body.dark-mode .cart-footer {
    background: #2d2d2d;
    border-top: 1px solid #007bff;
}

.cart-buttons-top {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 15px;
}

.cart-buttons-bottom {
    display: flex;
    justify-content: center;
    margin-top: 5px;
}

.cart-footer .btn-secondary {
    background: #007bff;
    color: white;
    padding: 8px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.cart-footer .btn-secondary:hover {
    background: #5a9bd4;
}

.cart-footer .btn-primary {
    background: #34c759;
    color: white;
    padding: 8px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.cart-footer .btn-primary:hover {
    background: #34c759;
}

.cart-footer .btn-danger {
    background: #6c757d;
    color: white;
    padding: 8px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.cart-footer .btn-danger:hover {
    background: #e03e00;
}

.btn-primary {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.btn-primary:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 15px rgba(0,123,255,0.4);
}

.btn-secondary {
    background: linear-gradient(135deg, #6c757d, #495057);
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.btn-secondary:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 15px rgba(108,117,125,0.4);
}

.btn-danger {
    background: linear-gradient(135deg, #dc3545, #b02a37);
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.btn-danger:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 15px rgba(220,53,69,0.4);
}

.close {
    color: #555;
    float: right;
    font-size: 30px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease, transform 0.2s ease;
}

.close:hover {
    color: #000;
    transform: scale(1.1);
}

body.dark-mode .close {
    color: #bbb;
}

body.dark-mode .close:hover {
    color: #fff;
}

.notification {
    display: none;
    position: fixed;
    top: 20px;
    right: 20px;
    background-color: #28a745;
    color: white;
    padding: 15px;
    border-radius: 5px;
    z-index: 1000;
}

.notification.show {
    display: block;
}

.notification.error {
    background-color: #007bff;
}

body.dark-mode .notification {
    background: #28a745;
    color: #1a1a1a;
}

#confirmModal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    display: none;
    justify-content: center;
    align-items: center;
}

#confirmModal.show {
    display: flex;
}

.confirm-modal-content {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    width: 90%;
    max-width: 400px;
    text-align: center;
    transform: scale(0.85);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

#confirmModal.show .confirm-modal-content {
    transform: scale(1);
    opacity: 1;
}

body.dark-mode .confirm-modal-content {
    background: #2d2d2d;
    color: #e0e0e0;
}

.confirm-modal-content p {
    margin: 0 0 20px 0;
    font-size: 16px;
}

.confirm-modal-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
}


.modal-content {
    background-color: #fff;
    margin: 10% auto;
    padding: 20px;
    border-radius: 5px;
    width: 90%;
    max-width: 700px; /* Ampliado para dos columnas */
    position: relative;
}
.close {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 24px;
    cursor: pointer;
    color: #333;
}
.close:hover {
    color: #0dcaf0; /* Verde del logotipo */
}
.product-details p {
    margin: 10px 0;
    font-size: 14px;
    color: #333;
    text-align: left; /* Alineado a la izquierda */
}
.product-details strong {
    color: #4a5e7d; /* Verde para etiquetas */
    min-width: 100px; /* Alinear etiquetas */
    display: inline-block;
}
#modalTitle {
    font-size: 20px;
    color: #131921; /* Color de la navbar */
    text-align: left;
}
        
/* detalle listado product Image*/
#productImage {
    border: 1px solid rgba(0, 123, 255, 0.86);
    border-radius: 10px;
    box-shadow: 10px rgba(0, 123, 255, 0.86);
    padding: none;
    background-color: #f8f8f8;
}

/* Responsivo */
@media (max-width: 767.98px) {
    .modal-content {
        margin: 20% auto;
        width: 95%;
    }
    #productImage {
        max-height: 200px; /* Reducir en móviles */
        margin-top: 20px;
    }
}

.login-modal-content {
    padding: 30px;
    width: 90%;
    max-width: 450px;
    background: rgba(0, 123, 255, 0.86);
    border-radius: 15px;
    box-shadow: 0 5px 10px #fff;
    transform: scale(0.85);
    opacity: 0;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
}

.modal.show .login-modal-content {
    transform: scale(1);
    opacity: 1;
}

body.dark-mode .login-modal-content {
    background: #2d2d2d;
    color: #e0e0e0;
}

.login-modal-content input,
.login-modal-content select {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    transition: border-color 0.3s ease;
}

.login-modal-content input:focus,
.login-modal-content select:focus {
    border-color: #007bff;
    outline: none;
}

.login-modal-content label {
    font-size: 14px;
    margin-bottom: 5px;
    display: block;
}

.login-modal-content p {
    text-align: center;
    cursor: pointer;
    color: #e0e0e0;
    margin-top: 15px;
}

.login-modal-content p:hover {
    text-decoration: underline;
}

#requestModal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: blur(5px);
    background: rgba(0, 0, 0, 0.6);
    z-index: 1500;
    display: none;
    justify-content: center;
    align-items: center;
}

#requestModal.show {
    display: flex;
}

.request-modal-content {
    background: linear-gradient(145deg, #f7f9fc, #e8ecef);
    padding: 20px;
    border-radius: 15px;
    border: 1px solid rgba(0, 123, 255, 0.2);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    width: 90%;
    max-width: 750px;
    max-height: 75vh;
    overflow-y: auto;
    text-align: center;
    transform: scale(0.85);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

#requestModal.show .request-modal-content {
    transform: scale(1);
    opacity: 1;
}

body.dark-mode .request-modal-content {
    background: linear-gradient(145deg, #2d2d2d, #3a3a3a);
    border: 1px solid rgba(0, 123, 255, 0.4);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    color: #e0e0e0;
}

.request-modal-content h3 {
    margin-bottom: 20px;
    font-size: 22px;
    font-weight: 600;
    color: #007bff;
    letter-spacing: 0.5px;
    display: flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .request-modal-content h3 {
    color: #66b0ff;
}

 /* metodo de contacto */
.contact-method-selection p {
    font-size: 16px;
    margin-bottom: 15px;
    color: #333;
}

body.dark-mode .contact-method-selection p {
    color: #d0d0d0;
}

.contact-method-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
}

.contact-method-btn {
    background: linear-gradient(135deg, #ffffff, #e2e8f0);
    color: #333;
    padding: 12px 20px;
    border: 1px solid #d1d9e6;
    border-radius: 10px;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.contact-method-btn:hover {
    background: linear-gradient(135deg, #e2e8f0, #ffffff);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
/* metodo de contacto */
.contact-method-btn.selected {
    background: rgba(0, 123, 255, 0.86);
    color: white;
    border-color: #007bff;
    box-shadow: 0 4px 12px #f4a261;
    transform: scale(1.05);
}

body.dark-mode .contact-method-btn {
    background: linear-gradient(135deg, #3a3a3a, #4a4a4a);
    color: #e0e0e0;
    border: 1px solid #555;
}

body.dark-mode .contact-method-btn:hover {
    background: linear-gradient(135deg, #4a4a4a, #3a3a3a);
}

body.dark-mode .contact-method-btn.selected {
    background: linear-gradient(135deg, #66b0ff, #007bff);
    border-color: #66b0ff;
    box-shadow: 0 4px 12px rgba(102, 176, 255, 0.3);
}

.contact-input .form-group {
    margin: 15px 0;
    text-align: left;
}

.contact-input label {
    display: block;
    font-size: 15px;
    font-weight: 500;
    color: #333;
    margin-bottom: 8px;
}

body.dark-mode .contact-input label {
    color: #d0d0d0;
}

.contact-input input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #d1d9e6;
    border-radius: 10px;
    background: #fafafa;
    font-size: 14px;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
}

.contact-input input:focus {
    border-color: #007bff;
    background: #ffffff;
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.2);
    outline: none;
}

body.dark-mode .contact-input input {
    background: #3a3a3a;
    border: 1px solid #555;
    color: #e0e0e0;
}

body.dark-mode .contact-input input:focus {
    border-color: #66b0ff;
    background: #4a4a4a;
    box-shadow: 0 4px 12px rgba(102, 176, 255, 0.3);
}

.btn-show-order,
.btn-download-preview,
.btn-primary,
.btn-secondary {
    padding: 10px 5px;
    border-radius: 10px;
    font-size: 15px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin: 0px auto;
}

.btn-show-order {
    background: rgba(0, 123, 255, 0.86);
    color: white;
}

.btn-show-order:hover {
    background: rgba(0, 123, 255, 0.86);
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(70, 130, 180, 0.4);
}

.btn-download-preview {
    background: linear-gradient(135deg, #28a745, #1e7e34);
    color: white;
}

.btn-download-preview:hover {
    background: linear-gradient(135deg, #34c759, #2a9943);
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(40, 167, 69, 0.4);
}

.btn-primary {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #339cff, #007bff);
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0, 123, 255, 0.4);
}

.btn-secondary {
    background: linear-gradient(135deg, #6c757d, #495057);
    color: white;
}

.btn-secondary:hover {
    background: linear-gradient(135deg, #82919d, #5c676f);
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(108, 117, 125, 0.4);
}

#orderSummary {
    margin: 15px 0;
    padding: 15px;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    background: #f8f9fa;
    text-align: left;
    min-height: 100px;
    max-height: 250px;
    overflow-y: auto;
    font-size: 13px;
    line-height: 1.6;
    font-family: 'Poppins', sans-serif;
    white-space: pre-wrap;
}

body.dark-mode #orderSummary {
    border-color: #555;
    background: #3a3a3a;
    color: #d0d0d0;
}

#orderSummary::-webkit-scrollbar {
    width: 6px;
}

#orderSummary::-webkit-scrollbar-thumb {
    background: #007bff;
    border-radius: 10px;
}

body.dark-mode #orderSummary::-webkit-scrollbar-thumb {
    background: #66b0ff;
}

.button-group {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
}

#requestModal.show .request-modal-content .contact-method-selection,
#requestModal.show .request-modal-content .contact-input,
#requestModal.show .request-modal-content .btn-show-order,
#requestModal.show .request-modal-content .btn-download-preview,
#requestModal.show .request-modal-content .button-group {
    animation: slideIn 0.4s ease forwards;
    opacity: 0;
}

#requestModal.show .request-modal-content .contact-method-selection { animation-delay: 0.1s; }
#requestModal.show .request-modal-content .contact-input { animation-delay: 0.2s; }
#requestModal.show .request-modal-content .btn-show-order { animation-delay: 0.3s; }
#requestModal.show .request-modal-content .btn-download-preview { animation-delay: 0.4s; }
#requestModal.show .request-modal-content .button-group { animation-delay: 0.5s; }

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 768px) {
    .request-modal-content {
        width: 95%;
        padding: 15px;
        max-width: 95%;
    }

    .request-modal-content h3 {
        font-size: 20px;
        margin-bottom: 15px;
    }

    .contact-method-buttons {
        flex-direction: column;
        gap: 10px;
    }

    .contact-method-btn {
        padding: 10px 15px;
        font-size: 14px;
    }

    .contact-input input {
        padding: 10px;
        font-size: 14px;
    }

    .btn-show-order,
    .btn-download-preview,
    .btn-primary,
    .btn-secondary {
        padding: 10px 20px;
        font-size: 14px;
    }

    #orderSummary {
        font-size: 12px;
        max-height: 200px;
    }

    .button-group {
        flex-direction: column;
        gap: 10px;
    }

    .no-results {
        text-align: center;
        padding: 20px;
        color: #666;
        font-size: 16px;
    }

    body.dark-mode .no-results {
        color: #bbb;
    }
}

/* Modal action buttons */
.modal-action-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
    width: 100%;
}

.btn-show-order,
.btn-download-preview,
.btn-primary,
.btn-secondary {
    margin: 0;
    flex-shrink: 0;
}

#requestModal.show .request-modal-content .modal-action-buttons {
    animation: slideIn 0.4s ease forwards;
    opacity: 0;
    animation-delay: 0.3s;
}
        
        <style>
/* Estilos para la notificación */
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 20px;
    background-color: #28a745; /* Verde para éxito */
    color: white;
    border-radius: 5px;
    z-index: 10000;
    display: none;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}
.notification.show {
    display: block;
}
.notification.error {
    background-color: #dc3545; /* Rojo para errores */
}
        /* Estilos para el spinner de carga */
.loading-spinner {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 15px 25px;
    border-radius: 5px;
    z-index: 10001;
    display: none;
    font-size: 1.1em;
}
.loading-spinner.show {
    display: flex;
    align-items: center;
    gap: 10px;
}
      /* Estilos para el modal de proveedores */
.supplier-logos {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    padding: 10px;
}
.supplier-logo img {
    height: 40px;
    width: auto;
    object-fit: contain;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 8px;
}
.supplier-logo img:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px #00ff59;
}
.modal-body {
    text-align: center;
}
.search-category-btn {
    min-width: 120px;
    text-align: center;
    padding: 6px 12px;
}
        
        
        /* Estilos para el modal de proveedores */
.modal {
    z-index: 1070 !important; /* Aumentado aún más para evitar conflictos */
}

.supplier-logos {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
    padding: 20px;
}
.supplier-logo img {
    height: 40px;
    width: auto;
    object-fit: contain;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 8px;
    cursor: pointer;
}
.supplier-logo img:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px #00ff59;
}
.modal-body {
    text-align: center;
}
.search-category-btn {
    min-width: 120px;
    text-align: center;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
}        
        
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    z-index: 1070 !important;
    justify-content: center;
    align-items: center;
    overflow: auto;
}
        
.modal-dialog {
    z-index: 1075 !important;
}
        
.modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: #000;
    z-index: 1030 !important;
    opacity: 0;
}
        
.modal-backdrop.show {
    opacity: 0.5;
}
        
.modal-open .modal {
    z-index: 1070 !important;
}
        
        
</style>
   
    <!-- DOMPurify -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.9/dist/purify.min.js"></script>
</head>
<body>
    
   <!-- Navbar estilo Amazon -->
<div class="container-fluid amazon-nav">
    <div class="row align-items-center">
       
        <!-- Logo -->
        <div class="col-lg-2 col-md-3 col-6">
            <a href="/" class="text-decoration-none d-flex align-items-center">
                <span class="h1 text-uppercase text-primary bg-dark px-2">Will</span>
                <span class="h1 text-uppercase text-dark bg-primary px-2 ml-n1">Cars</span>
                <img src="img/willcars-1.jpg" alt="Logo" class="logo-img ml-2" style="height: 40px; width: auto;">
            </a>
        </div>
        
<!-- Buscador -->
<div class="col-lg-6 col-md-6 col-12 text-center">
    <form id="searchForm" class="search-container mx-auto">
        <div class="search-category">
            <button class="btn btn-light search-category-btn" type="button" data-toggle="modal" data-target="#supplierModal">
                Proveedores
            </button>
        </div>
        <input type="text" id="searchProducts" class="form-control search-input" placeholder="Buscar productos">
        <button type="button" class="reset-search search-button" id="resetSearchBtn">
            <i class="fas fa-search"></i>
        </button>
    </form>
</div>

       
       
        <!-- Enlaces e íconos -->
        <div class="col-lg-4 col-md-3 col-6">
            <div class="nav-links d-flex align-items-center justify-content-end">
    <a href="index.html" class="nav-link text-white">Home</a>
    <div class="nav-spacer"></div>
    
    <a href="#" class="nav-link cart-container" id="cartIconDesktop">
        <i class="fas fa-shopping-cart text-primary"></i>
        <span class="cart-count">0</span>
    </a>
    <a href="#" class="nav-link favorite-container">
        <i class="fas fa-heart text-primary"></i>
        <span class="badge text-secondary border border-secondary rounded-circle">0</span>
    </a>
    <div class="nav-spacer"></div>
    
    <button type="button" class="btn btn-light nav-link login-btn" id="loginButton">Login</button>
    <div class="nav-spacer"></div>
    <div class="btn-group currency-lang">
        <button type="button" class="btn btn-sm btn-light nav-link dropdown-toggle" data-toggle="dropdown">USD</button>
        <div class="dropdown-menu dropdown-menu-right">
            <button class="dropdown-item" type="button">BS</button>
            <button class="dropdown-item" type="button">USD</button>
        </div>
    </div>
    
    <button id="themeToggle" class="btn btn-sm btn-light nav-link theme-btn" title="Alternar modo oscuro">
        <i class="fas fa-moon"></i>
    </button>
</div>
        </div>
    </div>
</div>
           
    <!-- Tabla de productos -->
    <div class="container-fluid">
        <div id="notification" class="notification"></div>
        <!-- Indicador de carga -->
<div id="loadingSpinner" class="loading-spinner">
    <i class="fas fa-spinner fa-spin"></i> Procesando pedido...
</div>
       
        <div id="productTableContainer">
            <table id="productTable" class="tableizer-table">
                <thead>
                    <tr class="tableizer-firstrow">
                        <th>Imagen</th>
                        <th>CODIGO</th>
                        <th>DESCRIPCION</th>
                        <th>MARCA</th>
                        <th>MODELO</th>
                        <th>USD</th>
                        <th>REF</th>
                        <th>PROVEEDOR</th>
                        <th>COMPRAR</th>
                    </tr>
                </thead>
                <tbody id="productTableBody"></tbody>
            </table>
        </div>
    </div>
    
    <!-- Modal de lista detalles del producto -->
    <div id="detailsModal" class="modal">
    <div class="modal-content">
        <span class="close">×</span>
        <div class="row">
            <div class="col-md-6">
                <h2 id="modalTitle" class="mb-4"></h2>
                <div id="modalContent" class="product-details">
                    <p><strong>Código:</strong> <span id="productCode"></span></p>
                    <p><strong>Descripción:</strong> <span id="productDescription"></span></p>
                    <p><strong>Marca:</strong> <span id="productBrand"></span></p>
                    <p><strong>Modelo:</strong> <span id="productModel"></span></p>
                    <p><strong>Precio USD:</strong> <span id="productPrice"></span></p>
                    <p><strong>Ref:</strong> <span id="productRef"></span></p>
                    <p><strong>Proveedor:</strong> <span id="productSupplier"></span></p>
                </div>
            </div>
            <div class="col-md-6 d-flex align-items-center justify-content-center">
                <img id="productImage" src="./img/default.png" alt="Producto" class="img-fluid" style="max-height: 300px; object-fit: contain;">
            </div>
        </div>
    </div>
</div>
  
   <!-- Modal paginacion -->
   <div class="pagination-controls" style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-top: 1rem;">
    <button id="paginationPrev" class="btn btn-primary">Anterior</button>
    <span id="paginationInfo">Página 1 de 1</span>
    <button id="paginationNext" class="btn btn-primary">Siguiente</button>
</div>
   
    <!-- Carrito Flotante -->
    <div id="cartSidebar">
        <span class="close">×</span>
        <h3>Compras</h3>
        <div class="cart-scroll-container">
            <table>
                <thead>
                    <tr>
                        <th>CÓDIGO</th>
                        <th>Producto</th>
                        <th>Ref</th>
                        <th>Cantidad</th>
                        <th>Subtotal</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="cartItems"></tbody>
            </table>
        </div>
        <div class="cart-footer">
            <p><strong>Total:</strong> <span id="cartTotal">$0.00</span></p>
            <div class="cart-buttons-top">
                <button class="btn btn-secondary" id="continueShoppingBtn">Seguir Comprando</button>
                <button class="btn btn-primary" id="requestOrderBtn">Solicitar Pedido</button>
                <div class="cart-buttons-bottom">
                    <button class="btn btn-danger float-end" id="clearCartBtn">Vaciar Carrito</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Login -->
    <div id="loginModal" class="modal">
            <div class="login-modal-content">
                <span class="close">×</span>
                <h3>Iniciar Sesión</h3>
                <form id="loginForm">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <label for="loginPassword">Contraseña</label>
                    <input type="password" id="loginPassword" placeholder="Contraseña" required>
                    <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
                </form>
                <p class="mt-3">
                    <a href="./forgot-password.html">¿Olvidaste tu contraseña?</a>
                </p>
                <p id="showRegisterLink">Regístrate</p>
            </div>
        </div>
        
    <!-- Modal de Registro -->
<div id="registerModal" class="modal">
    <div class="login-modal-content">
        <span class="close">×</span>
        <h3>Registro</h3>
        <form id="registerForm">
            <label for="registerName">Nombre</label>
            <input type="text" id="registerName" placeholder="Nombre" required minlength="3" maxlength="50">
            <label for="registerEmail">Email</label>
            <input type="email" id="registerEmail" placeholder="Email" required>
            <label for="registerPassword">Contraseña</label>
            <input type="password" id="registerPassword" placeholder="Contraseña" required minlength="6" maxlength="50">
            <label for="confirmPassword">Confirmar Contraseña</label>
            <input type="password" id="confirmPassword" placeholder="Confirmar Contraseña" required minlength="6" maxlength="50">
            <label for="registerRole">Rol</label>
            <select id="registerRole" required>
                <option value="user">Usuario</option>
                
           <!---<option value="admin">Administrador</option>--->
            </select>
            <button type="submit" class="btn btn-primary">Registrarse</button>
        </form>
        <p id="showLoginLink">¿Ya tienes cuenta? Inicia sesión</p>
    </div>
</div>   
   
    <!-- Modal de Confirmación -->
<div id="confirmModal" class="modal">
    <div class="confirm-modal-content">
        <p id="confirmMessage"></p>
        <div class="confirm-modal-buttons">
            <button class="btn btn-primary" id="confirmYes">Sí</button>
            <button class="btn btn-secondary" id="confirmCancel">No</button>
        </div>
    </div>
</div>

    <!-- Modal de Solicitar Pedido -->
<div id="requestModal" class="modal">
    <div class="request-modal-content">
        <span class="close">×</span>
        <h3><i class="fas fa-shipping-fast mr-2"></i> Solicitar Pedido</h3>
        <div class="contact-method-selection">
            <p>¿Cómo prefieres que te contactemos?</p>
            <div class="contact-methods">
                <button class="contact-method-btn" data-method="email">Email</button>
                <button class="contact-method-btn" data-method="whatsapp">WhatsApp</button>
                <button class="contact-method-btn" data-method="both">Ambos</button>
            </div>
        </div>
        <div class="name-code-inputs">
    <div class="form-group">
        <label for="fullNameInput"><i class="fas fa-user mr-1"></i> Nombre / Rif</label>
        <input type="text" id="fullNameInput" placeholder="Ingresa tu Nombre / Rif">
    </div>
    <div class="form-group">
    <label><i class="fas fa-id-card mr-1"></i> Código Cliente:</label>
    <span id="clientCodeDisplay" class="form-control-static">Ej: Ucc-00001</span> </div>
</div>
        <div class="contact-input" style="display: none;">
    <div class="email-whatsapp-inputs">
        <div class="form-group" id="emailInputGroup" style="display: none;">
            <label for="emailInput"><i class="fas fa-envelope mr-1"></i> Ingresa tu Email</label>
            <input type="email" id="emailInput" placeholder="tu@email.com" value="${currentUser?.email || ''}">
        </div>
        <div class="form-group" id="whatsappInputGroup" style="display: none;">
            <label for="whatsappInput"><i class="fab fa-whatsapp mr-1"></i> Ingresa WhatsApp</label>
            <input type="tel" id="whatsappInput" placeholder="+584123456789">
        </div>
    </div> 
     
      <!-- mostrar-descargar pedido   -->
       <div class="modal-action-buttons">
    <div class="show-order-btn-container">
        <button class="btn-show-order" id="showOrderBtn" style="display: block;"><i class="fas fa-eye mr-1"></i> Mostrar Pedido</button>
    </div>
    <div id="orderSummary" style="display: none;"></div>
    <button class="btn-download-preview" id="downloadPreviewBtn" style="display: none;"><i class="fas fa-download mr-1"></i> Descargar Pedido</button>
    <div class="button-group" style="display: none;">
        <button class="btn btn-primary" id="sendOrderBtn"><i class="fas fa-paper-plane mr-1"></i> Enviar</button>
        <button class="btn btn-secondary" id="cancelOrderBtn"><i class="fas fa-times mr-1"></i> Cancelar</button>
     </div>
   </div>
  </div>
 </div>
</div>
   <div id="confirmationModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <img src="./img/willcars-1.jpg" alt="WillCars Logo" class="modal-logo">
            <div class="check-circle">
                <i class="fas fa-check"></i> </div>
        </div>
        
        <!-- pedido ha sido enviado -->
        <div class="modal-body">
            <h2>¡Excelente!</h2>
            <p>Su pedido ha sido enviado y se está procesando.</p>
            <p>Esté atento para ser contactado y ajustar detalles de entrega y venta final.</p>
         </div>
        <div class="modal-footer">
            <button id="downloadOrderBtn" class="modal-button primary-button">Descargar su pedido</button>
            <button id="closeModalBtn" class="modal-button secondary-button">Cerrar</button>
        </div>
    </div>
</div>
    
    <!-- Modal de proveedores -->
<div class="modal fade" id="supplierModal" tabindex="-1" role="dialog" aria-labelledby="supplierModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="supplierModalLabel">Seleccionar Proveedor</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="supplier-logos">
                    <a href="#" class="supplier-logo" data-proveedor-id="PS-00001">
                        <img src="/img/ico/PS-00001.jpg" alt="Sanchez Import" title="Ver productos de Sanchez Import">
                    </a>
                    <a href="#" class="supplier-logo" data-proveedor-id="MAS-i002">
                        <img src="/img/ico/willcars-1.jpg" alt="Mastro" title="Ver productos de Mastro">
                    </a>
                    <a href="#" class="supplier-logo" data-proveedor-id="ARG-C003">
                        <img src="/img/ico/willcars-1.jpg" alt="ARG Import" title="Ver productos de ARG Import">
                    </a>
                    <a href="#" class="supplier-logo" data-proveedor-id="Mcc-i004">
                        <img src="/img/ico/willcars-1.jpg" alt="MultiOcc" title="Ver productos de MultiOcc">
                    </a>
                    <a href="#" class="supplier-logo" data-proveedor-id="Wic-A1">
                        <img src="/img/ico/willcars-1.jpg" alt="WillCars Import" title="Ver productos de WillCars Import">
                    </a>
                    <a href="#" class="supplier-logo" data-proveedor-id="kod-Sc001">
                        <img src="/img/ico/willcars-1.jpg" alt="Kode Import" title="Ver productos de Kode Import">
                    </a>
                    <a href="#" class="supplier-logo" data-proveedor-id="Karecho-001">
                        <img src="/img/ico/willcars-1.jpg" alt="KarechoShop" title="Ver productos de KarechoShop">
                    </a>
                    <a href="#" class="supplier-logo" data-proveedor-id="">
                        <img src="/img/ico/willcars-1.jpg" alt="Todos los Proveedores" title="Ver todos los productos">
                    </a>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
    
    <!-- Back to Top -->
    <a href="#" class="btn btn-primary back-to-top"><i class="fa fa-angle-double-up"></i></a>
    <!-- JavaScript Libraries -->
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <!--<script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script> -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/owlcarousel/owl.carousel.min.js"></script>
<script src="js/config.js"></script>
<script src="js/buscador.js"></script>
    
</body>
</html>